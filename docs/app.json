[{"name":"app.R","content":"\r\nlibrary(shiny)\r\nlibrary(palmerpenguins)\r\nlibrary(ggplot2)\r\nlibrary(purrr)\r\nlibrary(dplyr)\r\nlibrary(echarts4r)\r\n\r\n# source external files\r\n\r\n# source all modules\r\nmod_file_path <- paste0('./R')\r\n\r\n# only specific pattern in the directory\r\nmod_scripts <- list.files(path= mod_file_path, pattern = glob2rx(\"mod_*.R\")) %>% as_vector()\r\n\r\n#\r\nanalyticscripts <- c(mod_scripts) %>% \r\n                   as_tibble() %>%\r\n                   mutate(value = paste0(mod_file_path,'/',value))\r\n\r\n# load all functions\r\npurrr::walk(analyticscripts$value, source)\r\n\r\n#? Shiny modules\r\n# mod app\r\npenguinsApp <- function() {\r\n  ui <- fluidPage(\r\n    mod_penguinsUI(\"id1\")\r\n  )\r\n  server <- function(input, output, session) {\r\n    mod_penguinsServer(\"id1\")\r\n  }\r\n  shinyApp(ui, server)  \r\n}\r\n\r\n\r\npenguinsApp()","type":"text"},{"name":"DESCRIPTION","content":"Title: Penguins App\nAuthor: Ramanathan Perumal\nAuthorUrl: http://www.google.com\nLicense: MIT\nType: Shiny\n","type":"text"},{"name":"R/mod_penguinsServer.R","content":"\r\n# mod server\r\nmod_penguinsServer <- function(id) {\r\n  moduleServer(id, function(input, output, session) {\r\n\r\n\r\n  #?\r\n  ns <- session$ns  \r\n\r\n  #? select species\r\n  selectedSpecies <- reactive({\r\n    penguins %>% \r\n    filter(!is.na(sex)) %>%\r\n    dplyr::filter(species==input$species)\r\n  })\r\n\r\n  \r\n  #? output\r\n  output$scatterPlot <- renderPlot({\r\n   # plot\r\n   ggplot(selectedSpecies(),aes(x=bill_length_mm,y=bill_depth_mm))+\r\n        geom_point(shape = 21, colour = \"#775c6a\", fill = \"#f4828c\", size = 3, stroke = 1, alpha = 0.7)+\r\n        facet_grid(cols = vars(!!rlang::sym(input$facet_grp))) +\r\n        labs(x =\"Bill Length (mm)\", y= \"Bill Depth (mm)\") +\r\n        theme(aspect.ratio = 1)  +\r\n        theme_bw()      \r\n\r\n  })\r\n\r\n  # echarts\r\n  output$ec_plot1 <- renderEcharts4r({\r\n\r\n     temp_df <- selectedSpecies() %>%                            \r\n                group_by((!!rlang::sym(input$facet_grp))) %>%  \r\n                summarize(n = n())\r\n\r\n      names(temp_df) <- c('grp', 'n')\r\n\r\n     # plot\r\n      temp_df %>%\r\n      mutate(grp = as.factor(as.character(grp))) %>%\r\n      e_charts(x = grp) %>%         \r\n      e_pie(n, \r\n        selectedOffset= 15,\r\n        radius = c(\"45%\", \"75%\"),\r\n        itemStyle = list(borderRadius = 10,\r\n                         borderColor= '#fff',\r\n                         borderWidth= 2)) %>%\r\n      e_tooltip(formatter = htmlwidgets::JS(\"\r\n                                        function(params){\r\n                                        return('<strong>' + params.name + \r\n                                        '<\/strong><br />total: ' + params.value + \r\n                                        '<br />percent: ' +  params.percent)  +'%' }  \")) %>%\r\n      e_labels(show = FALSE) \r\n  })\r\n\r\n\r\n\r\n\r\n  # end\r\n\r\n  })\r\n}","type":"text"},{"name":"R/mod_penguinsUI.R","content":"# mod ui\r\nmod_penguinsUI <- function(id) {\r\n\r\n  ns <- NS(id)\r\n\r\n\r\n  tagList(\r\n\r\n  br(), \r\n  h2(\"Palmer Penguins Data Exploration\"),\r\n  br(),\r\n\r\n  #? fluidrows\r\n  fluidRow(\r\n  \r\n      column(6,\r\n      wellPanel(\r\n      selectInput(ns(\"species\"), 'Species', unique(penguins$species), selected=\"Adelie\")\r\n      )),\r\n\r\n      column(6,\r\n      wellPanel(\r\n      selectInput(ns(\"facet_grp\"), 'Group-by', c('island', 'year', 'sex'), selected=\"island\")\r\n      ))\r\n  )\r\n\r\n  , fluidRow(\r\n      column(6,\r\n      echarts4rOutput(ns(\"ec_plot1\"))\r\n      )\r\n     , column(6,\r\n      plotOutput(ns(\"scatterPlot\"))\r\n      )\r\n  )\r\n\r\n# end  \r\n\r\n)\r\n}","type":"text"},{"name":"iris.csv","content":"\"sepal.length\",\"sepal.width\",\"petal.length\",\"petal.width\",\"variety\"\n5.1,3.5,1.4,.2,\"Setosa\"\n4.9,3,1.4,.2,\"Setosa\"\n4.7,3.2,1.3,.2,\"Setosa\"\n4.6,3.1,1.5,.2,\"Setosa\"\n5,3.6,1.4,.2,\"Setosa\"\n5.4,3.9,1.7,.4,\"Setosa\"\n4.6,3.4,1.4,.3,\"Setosa\"\n5,3.4,1.5,.2,\"Setosa\"\n4.4,2.9,1.4,.2,\"Setosa\"\n4.9,3.1,1.5,.1,\"Setosa\"\n5.4,3.7,1.5,.2,\"Setosa\"\n4.8,3.4,1.6,.2,\"Setosa\"\n4.8,3,1.4,.1,\"Setosa\"\n4.3,3,1.1,.1,\"Setosa\"\n5.8,4,1.2,.2,\"Setosa\"\n5.7,4.4,1.5,.4,\"Setosa\"\n5.4,3.9,1.3,.4,\"Setosa\"\n5.1,3.5,1.4,.3,\"Setosa\"\n5.7,3.8,1.7,.3,\"Setosa\"\n5.1,3.8,1.5,.3,\"Setosa\"\n5.4,3.4,1.7,.2,\"Setosa\"\n5.1,3.7,1.5,.4,\"Setosa\"\n4.6,3.6,1,.2,\"Setosa\"\n5.1,3.3,1.7,.5,\"Setosa\"\n4.8,3.4,1.9,.2,\"Setosa\"\n5,3,1.6,.2,\"Setosa\"\n5,3.4,1.6,.4,\"Setosa\"\n5.2,3.5,1.5,.2,\"Setosa\"\n5.2,3.4,1.4,.2,\"Setosa\"\n4.7,3.2,1.6,.2,\"Setosa\"\n4.8,3.1,1.6,.2,\"Setosa\"\n5.4,3.4,1.5,.4,\"Setosa\"\n5.2,4.1,1.5,.1,\"Setosa\"\n5.5,4.2,1.4,.2,\"Setosa\"\n4.9,3.1,1.5,.2,\"Setosa\"\n5,3.2,1.2,.2,\"Setosa\"\n5.5,3.5,1.3,.2,\"Setosa\"\n4.9,3.6,1.4,.1,\"Setosa\"\n4.4,3,1.3,.2,\"Setosa\"\n5.1,3.4,1.5,.2,\"Setosa\"\n5,3.5,1.3,.3,\"Setosa\"\n4.5,2.3,1.3,.3,\"Setosa\"\n4.4,3.2,1.3,.2,\"Setosa\"\n5,3.5,1.6,.6,\"Setosa\"\n5.1,3.8,1.9,.4,\"Setosa\"\n4.8,3,1.4,.3,\"Setosa\"\n5.1,3.8,1.6,.2,\"Setosa\"\n4.6,3.2,1.4,.2,\"Setosa\"\n5.3,3.7,1.5,.2,\"Setosa\"\n5,3.3,1.4,.2,\"Setosa\"\n7,3.2,4.7,1.4,\"Versicolor\"\n6.4,3.2,4.5,1.5,\"Versicolor\"\n6.9,3.1,4.9,1.5,\"Versicolor\"\n5.5,2.3,4,1.3,\"Versicolor\"\n6.5,2.8,4.6,1.5,\"Versicolor\"\n5.7,2.8,4.5,1.3,\"Versicolor\"\n6.3,3.3,4.7,1.6,\"Versicolor\"\n4.9,2.4,3.3,1,\"Versicolor\"\n6.6,2.9,4.6,1.3,\"Versicolor\"\n5.2,2.7,3.9,1.4,\"Versicolor\"\n5,2,3.5,1,\"Versicolor\"\n5.9,3,4.2,1.5,\"Versicolor\"\n6,2.2,4,1,\"Versicolor\"\n6.1,2.9,4.7,1.4,\"Versicolor\"\n5.6,2.9,3.6,1.3,\"Versicolor\"\n6.7,3.1,4.4,1.4,\"Versicolor\"\n5.6,3,4.5,1.5,\"Versicolor\"\n5.8,2.7,4.1,1,\"Versicolor\"\n6.2,2.2,4.5,1.5,\"Versicolor\"\n5.6,2.5,3.9,1.1,\"Versicolor\"\n5.9,3.2,4.8,1.8,\"Versicolor\"\n6.1,2.8,4,1.3,\"Versicolor\"\n6.3,2.5,4.9,1.5,\"Versicolor\"\n6.1,2.8,4.7,1.2,\"Versicolor\"\n6.4,2.9,4.3,1.3,\"Versicolor\"\n6.6,3,4.4,1.4,\"Versicolor\"\n6.8,2.8,4.8,1.4,\"Versicolor\"\n6.7,3,5,1.7,\"Versicolor\"\n6,2.9,4.5,1.5,\"Versicolor\"\n5.7,2.6,3.5,1,\"Versicolor\"\n5.5,2.4,3.8,1.1,\"Versicolor\"\n5.5,2.4,3.7,1,\"Versicolor\"\n5.8,2.7,3.9,1.2,\"Versicolor\"\n6,2.7,5.1,1.6,\"Versicolor\"\n5.4,3,4.5,1.5,\"Versicolor\"\n6,3.4,4.5,1.6,\"Versicolor\"\n6.7,3.1,4.7,1.5,\"Versicolor\"\n6.3,2.3,4.4,1.3,\"Versicolor\"\n5.6,3,4.1,1.3,\"Versicolor\"\n5.5,2.5,4,1.3,\"Versicolor\"\n5.5,2.6,4.4,1.2,\"Versicolor\"\n6.1,3,4.6,1.4,\"Versicolor\"\n5.8,2.6,4,1.2,\"Versicolor\"\n5,2.3,3.3,1,\"Versicolor\"\n5.6,2.7,4.2,1.3,\"Versicolor\"\n5.7,3,4.2,1.2,\"Versicolor\"\n5.7,2.9,4.2,1.3,\"Versicolor\"\n6.2,2.9,4.3,1.3,\"Versicolor\"\n5.1,2.5,3,1.1,\"Versicolor\"\n5.7,2.8,4.1,1.3,\"Versicolor\"\n6.3,3.3,6,2.5,\"Virginica\"\n5.8,2.7,5.1,1.9,\"Virginica\"\n7.1,3,5.9,2.1,\"Virginica\"\n6.3,2.9,5.6,1.8,\"Virginica\"\n6.5,3,5.8,2.2,\"Virginica\"\n7.6,3,6.6,2.1,\"Virginica\"\n4.9,2.5,4.5,1.7,\"Virginica\"\n7.3,2.9,6.3,1.8,\"Virginica\"\n6.7,2.5,5.8,1.8,\"Virginica\"\n7.2,3.6,6.1,2.5,\"Virginica\"\n6.5,3.2,5.1,2,\"Virginica\"\n6.4,2.7,5.3,1.9,\"Virginica\"\n6.8,3,5.5,2.1,\"Virginica\"\n5.7,2.5,5,2,\"Virginica\"\n5.8,2.8,5.1,2.4,\"Virginica\"\n6.4,3.2,5.3,2.3,\"Virginica\"\n6.5,3,5.5,1.8,\"Virginica\"\n7.7,3.8,6.7,2.2,\"Virginica\"\n7.7,2.6,6.9,2.3,\"Virginica\"\n6,2.2,5,1.5,\"Virginica\"\n6.9,3.2,5.7,2.3,\"Virginica\"\n5.6,2.8,4.9,2,\"Virginica\"\n7.7,2.8,6.7,2,\"Virginica\"\n6.3,2.7,4.9,1.8,\"Virginica\"\n6.7,3.3,5.7,2.1,\"Virginica\"\n7.2,3.2,6,1.8,\"Virginica\"\n6.2,2.8,4.8,1.8,\"Virginica\"\n6.1,3,4.9,1.8,\"Virginica\"\n6.4,2.8,5.6,2.1,\"Virginica\"\n7.2,3,5.8,1.6,\"Virginica\"\n7.4,2.8,6.1,1.9,\"Virginica\"\n7.9,3.8,6.4,2,\"Virginica\"\n6.4,2.8,5.6,2.2,\"Virginica\"\n6.3,2.8,5.1,1.5,\"Virginica\"\n6.1,2.6,5.6,1.4,\"Virginica\"\n7.7,3,6.1,2.3,\"Virginica\"\n6.3,3.4,5.6,2.4,\"Virginica\"\n6.4,3.1,5.5,1.8,\"Virginica\"\n6,3,4.8,1.8,\"Virginica\"\n6.9,3.1,5.4,2.1,\"Virginica\"\n6.7,3.1,5.6,2.4,\"Virginica\"\n6.9,3.1,5.1,2.3,\"Virginica\"\n5.8,2.7,5.1,1.9,\"Virginica\"\n6.8,3.2,5.9,2.3,\"Virginica\"\n6.7,3.3,5.7,2.5,\"Virginica\"\n6.7,3,5.2,2.3,\"Virginica\"\n6.3,2.5,5,1.9,\"Virginica\"\n6.5,3,5.2,2,\"Virginica\"\n6.2,3.4,5.4,2.3,\"Virginica\"\n5.9,3,5.1,1.8,\"Virginica\"","type":"text"}]
